(function(){function t(b,a){return-1<b.indexOf(a)?b:-1<b.indexOf("?")?b+"\x26"+a:b+"?"+a}function N(b){for(var a=0;b&&b.getAttribute("class")!==y;)b=b.parentNode,a++,4<a&&(b=null);(a=b&&b.parentNode)&&a.getAttribute("class")===w&&(b.removeAttribute("style"),b.removeAttribute("class"),a.removeAttribute("style"))}function ba(b){b.removeAttribute("data-iframely-url");b.removeAttribute("data-iframely-loading")}function ca(b,a){if(da){var c=b;for(var f=!1;!f&&c.parentNode;)c=c.parentNode,f=c.className&&
0<=c.className.split(" ").indexOf(da);if(c=f&&c){(b=c.parentNode)&&b.removeChild(c);return}}c=a&&a.originalElement;if(!c&&b&&"A"===b.nodeName&&(b.textContent||b.innerText))ba(b),N(b);else{if(a&&a.iframeContainer)a=a.iframeContainer;else if(a=b,f=C(b))a=f.maxWidthWrapper;f=a.parentNode;c&&"A"===c.nodeName&&(c.textContent||c.innerText)&&(ba(b),f.insertBefore(c,a));f.removeChild(a)}}function O(b){b=b.getBoundingClientRect();var a=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||
document.documentElement.clientWidth,f=2*a,d=2*c;if(0<=b.bottom&&0<=b.right&&b.top<=a&&b.left<=c)return ra;if(b.bottom>=0-f&&b.right>=0-d&&b.top<=a+f&&b.left<=c+d)return ea}function H(b){for(var a=0,c=0;c<b.childNodes.length;c++){var f=b.childNodes[c];f.nodeType===Node.TEXT_NODE?(f=f.textContent||f.innerText,(f=f.replace(/\s|\n/g,""))&&a++):f.nodeType===Node.ELEMENT_NODE&&a++}return a}function C(b,a){b=b.parentNode;if(!(!b||"DIV"!==b.nodeName||2<H(b)||a&&b.getAttribute("class")!==y||!a&&"relative"!==
b.style.position&&b.getAttribute("class")!==y)){var c=b.parentNode;if(!(!c||"DIV"!==c.nodeName||1<H(c)||a&&c.getAttribute("class")!==w||!a&&c.getAttribute("class")&&!c.getAttribute("class").match(/iframely/i)))return{aspectWrapper:b,maxWidthWrapper:c}}}function sa(b){var a=P(b);b=a.url;var c=a.api_key;a=a.key;var f=[];b&&f.push("url\x3d"+encodeURIComponent(b));c&&f.push("api_key\x3d"+encodeURIComponent(c));a&&f.push("key\x3d"+encodeURIComponent(a));return"/api/thumbnail?"+f.join("\x26")}function fa(b,
a){if(b=C(b)){if(a.match(/\/api\/iframe\?.+/))var c=a.replace(/\/api\/iframe\?.+/,sa(a));else if(a.match(/^(?:https?:)?\/\/[^\/]+\/[a-zA-Z0-9]+(?:\?.*)?$/))c=a.replace(/^((?:https?:)?\/\/[^\/]+\/[a-zA-Z0-9]+)((?:\?.*)?)$/,"$1/thumbnail");else return;a=document.createElement("div");a.style.position="absolute";a.style.top="0";a.style.width="100%";a.style.height="100%";a.style.backgroundImage="url('"+c+"')";a.style.backgroundSize="cover";a.style.backgroundPosition="center";c=document.createElement("div");
c.setAttribute("class",ta);a.appendChild(c);c=b.aspectWrapper.style["padding-top"];var f=b.aspectWrapper.style["padding-bottom"];!f&&-1<b.aspectWrapper.className.indexOf(y)&&(f="56.25%");if(c&&f&&c.match(/^\d+px$/)){var d=document.createElement("div");d.style.left=0;d.style.top="-"+c;d.style.width="100%";d.style.height=0;d.style.position="relative";d.style["padding-bottom"]=f;d.appendChild(a);b.aspectWrapper.appendChild(d)}else b.aspectWrapper.appendChild(a)}}function ha(b){b=C(b);var a;if(a=b&&b.aspectWrapper&&
1<H(b.aspectWrapper))a:{a=b.aspectWrapper;for(var c=0,d=0;d<a.childNodes.length;d++){var g=a.childNodes[d];if(g.nodeType!==Node.TEXT_NODE&&g.nodeType===Node.ELEMENT_NODE){if(1===c){a=g;break a}c++}}a=void 0}a&&"DIV"===a.nodeName&&b.aspectWrapper.removeChild(a)}function ua(b,a){setTimeout(function(){va(b)},a==ea?200:0)}function va(b){function a(){d++;d===c&&(clearTimeout(g),setTimeout(function(){ha(b)},200))}var c=b.hasAttribute("data-direct")?1:2,d=0;b.addEventListener?b.addEventListener("load",a):
b.attachEvent("onload",a);var g=setTimeout(function(){a()},1E4);var e=b.getAttribute("data-iframely-url");e&&(b.removeAttribute("data-iframely-url"),b.removeAttribute("data-iframely-loading"),b.setAttribute("src",e))}function ia(){if(!document.getElementById(ja)){var b=ja,a=wa,c=document.createElement("style");c.id=b;c.type="text/css";c.styleSheet?c.styleSheet.cssText=a:c.innerHTML=a;document.getElementsByTagName("head")[0].appendChild(c)}}function E(b,a){ia();a||(a=C(b));a&&(b.style.top="",b.style.left=
"",b.style.width="",b.style.height="",b.style.position="",b.style.border="",b.style.boxSizing="",a.aspectWrapper.style.top="",a.aspectWrapper.style.left="",a.aspectWrapper.style.width="",a.aspectWrapper.style.position="",a.aspectWrapper.className=y,a.maxWidthWrapper.className=w)}function Q(b,a){var c=C(b);E(b,c);var f=b.getAttribute("data-max-width");f&&(a["max-width"]=f);if(a){f=function(){var a=u.clientHeight;h!=a&&z.trigger("heightChanged",b,h,a)};a.frame_style&&b.setAttribute("data-frame-style",
a.frame_style);a.scrolling&&b.setAttribute("scrolling",a.scrolling);var g=b.getAttribute("data-frame-style"),e=g&&g.match(/border:[^;]*(\d+)px/)||0;e&&(e=parseInt(e[1]),e*=2);if(c){var u=c.aspectWrapper,n=c.maxWidthWrapper,h=u.clientHeight;b.removeAttribute("style");u.removeAttribute("style");n.removeAttribute("style");g&&(g.match(/border-radius/)?(u.setAttribute("style",g),u.style.overflow="hidden"):b.setAttribute("style",g));a&&a.height&&a.width&&!a["aspect-ratio"]?(n.style.width=a.width+e+"px",
u.style.height=a.height+e+"px",u.style.paddingBottom=0):(a["aspect-ratio"]?(u.style["padding-bottom"]=Math.round(1E5/a["aspect-ratio"])/1E3+"%",a["padding-bottom"]&&(u.style.paddingTop=a["padding-bottom"]+"px")):(a.height&&(u.style.height=a.height+e+"px",u.style.paddingBottom=0),a.width&&(u.style.width=a.width+e+"px")),(a["max-width"]||a["min-width"])&&["max-width","min-width"].forEach(function(b){var c=a[b];if(c){if("number"===typeof c||"string"===typeof c&&c.match(/^(\d+)?\.?(\d+)?$/))c=c+e+"px";
n.style[b]=c}}),d.checkLazyLoad());f()}}}function P(b){if(b=b.match(/\?(.+)/i)){b=b[1];b=b.split("\x26");for(var a={},c=0;c<b.length;c++){var d=b[c].split("\x3d");a[d[0]]=decodeURIComponent(d[1])}return a}return{}}function xa(){var b=!1;try{b=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0)}catch(a){b=navigator.mimeTypes&&void 0!=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin?!0:!1}return b}var p=window.iframely=window.iframely||
{},d=p.widgets=p.widgets||{},z=p.events=p.events||{},A=d._iframes=d._iframes||[],R=d._global_iframes=d._global_iframes||[],q=d._lazy_iframes=d._lazy_iframes||[],J=d._lazy_widgets=d._lazy_widgets||[],S=d._import_links=d._import_links||{},T=/^(?:https?:)?\/\/[^\/]+/,ya=/^(?:https?:)?\/\/[^\/]+\/(\w+)(?:\?.*)?$/;"function"!==typeof Array.prototype.forEach&&(Array.prototype.forEach=function(b){for(var a=0;a<this.length;a++)b.apply(this,[this[a],a,this])});d.load||(p.load=d.load=function(){if(0===arguments.length){var b=
document.querySelectorAll("[data-iframely-url]"),a;if(!(-1<navigator.userAgent.toLowerCase().indexOf("firefox")||za||ka)&&1<b.length&&"file:"!==document.location.protocol&&"import"in(a=document.createElement("link"))){for(var c=function(){for(var a in n)for(var b=n[a],c=0;c<b.length;c++){var f=b[c];"import"===f.getAttribute("data-iframely-loading")&&(f.removeAttribute("data-iframely-loading"),d.createWidget(f))}},f=function(a,b){n[a]||(n[a]=[]);n[a].push(b);u++},g=[],e=[],u=0,n={},h,B,k,q,m,y,t,w,
F,z,D=0;D<b.length;D++){var l=b[D];if(!l.getAttribute("data-iframely-loading")){var A=function(){q=q||r.match(/align=left/);F=F||K;m=m||(G=r.match(/iframe=([\w-]+)/))&&G[1];y=y||r.match(/autoplay=(true|1)/);w=w||r.match(/playerjs=(true|1)/);z=z||(G=r.match(/language=([\w_-]+)/))&&G[1];var a=r.match(/maxwidth=(\d+)/);a&&(t=t||a[1])},r=l.getAttribute("data-iframely-url");h=(h=r.match(T))&&h[0]||L;var v=r.match(ya);v=v&&v[1];var G,M=r.match(/import=(false|0)/),H=r.match(/app=(true|1)/),K=(G=r.match(/media=([\w-]+)/))&&
G[1];!I&&F&&K!==F&&(M=!0);I&&K&&I!==K&&(M=!0);"IFRAME"===l.nodeName&&H&&(M=!0);M?d.createWidget(l):v?(l.setAttribute("data-iframely-loading","import"),-1===e.indexOf(v)&&e.push(v),f(v,l),A()):(k=P(r),(v=k.url)||(v=l.getAttribute("href")),B=k.api_key||U,k=k.key||V,(B||k)&&v?(l.setAttribute("data-iframely-loading","import"),-1===g.indexOf(v)&&g.push(v),f(v,l),A()):d.createWidget(l))}}if(1<u&&(0<g.length||0<e.length)&&h){var E=function(a){var b=(a=a["import"])?a.querySelectorAll("template[data-uri]"):
[];d.applyIframelyImportCommonStyles&&d.applyIframelyImportCommonStyles(a);for(var f=0;f<b.length;f++){var e=b[f],g=e.getAttribute("data-iframe-src"),k=e.getAttribute("data-media"),h=e.hasAttribute("data-cancel"),u=e.hasAttribute("data-shadow"),v=e.getAttribute("data-uri"),m=e.hasAttribute("data-render-event"),B=n[v];if(B){for(var p=0;p<B.length;p++){var x=B[p];if(h)ca(x);else if(g){if(k)try{k=JSON.parse(k)}catch(Aa){k=null}x.removeAttribute("data-iframely-loading");d.createWidget(x,{directIframeSrc:g,
media:k})}else{var q=document.importNode(e.content,!0),l=!m&&C(x,!0);if(l){var r=l.aspectWrapper.parentNode;var t=l.aspectWrapper;l.maxWidthWrapper.removeAttribute("style")}else r=x.parentNode,t=x;var y=la||x.hasAttribute("data-lazy");if("IFRAME"===x.nodeName)x.removeAttribute("data-iframely-loading"),d.createWidget(x);else{var z=null;if(u){var w=document.createElement("div"),A=w.createShadowRoot();A.appendChild(q);q={shadowRoot:A,shadowContainer:w,container:r,sourceTemplate:e,importDoc:a};d.applyCardStyles&&
d.applyCardStyles(q);z=d.getWidgetAfterRenderCb&&d.getWidgetAfterRenderCb(q);q=w}w=function(){var a=r,b=z;return function(){b&&b();m&&setTimeout(function(){N(a)},5E3)}}();!y||O(x)?(r.insertBefore(q,t),r.removeChild(t),w()):(l?(l=t,x.parentNode.removeChild(x)):(l=document.createElement("div"),r.insertBefore(l,t),r.removeChild(t),l.style.width="100%",l.style.height="400px"),J.push({container:l,widget:q,widgetAfterRenderCb:w}))}}}delete n[v]}}c()};a.rel="import";a.href=h+"/api/import?app\x3d1";xa()&&
(a.href+="\x26flash\x3d1");p.isTouch()&&(a.href+="\x26touch\x3d1");0<g.length&&(g=g.map(function(a){return"uri\x3d"+encodeURIComponent(a)}),a.href+="\x26"+g.join("\x26"));0<e.length&&(a.href+="\x26ids\x3d"+encodeURIComponent(e.join("\x26")));B?a.href+="\x26api_key\x3d"+B:k&&(a.href+="\x26key\x3d"+k);if(q||"left"===W)a.href+="\x26align\x3dleft";if(m||ma)a.href+="\x26iframe\x3d"+(m||ma);y&&(a.href+="\x26autoplay\x3d1");if(t||X)a.href+="\x26maxwidth\x3d"+(t||X);if(w||ka)a.href+="\x26playerjs\x3d1";if(F||
I)a.href+="\x26media\x3d"+(F||I);if(z||na)a.href+="\x26language\x3d"+(z||na);a.onload=function(){E(a)};a.onerror=function(){c()};a.href in S?E(S[a.href]):(S[a.href]=a,document.head.appendChild(a))}else c()}else for(D=0;D<b.length;D++)l=b[D],d.createWidget(l)}else 1===arguments.length?d.createWidget(arguments[0]):2===arguments.length&&d.createWidgetInContainer(arguments[0],arguments[1])});d.createWidgetInContainer||(d.createWidgetInContainer=function(b,a){var c=document.createElement("a");c.setAttribute("href",
a);c.textContent=a;b.appendChild(c);d.createWidget(c)});d.createWidget||(d.createWidget=function(b,a){if(!b.getAttribute("data-iframely-loading")){b.setAttribute("data-iframely-loading",!0);var c=b.getAttribute("data-iframely-url"),f=b.hasAttribute("data-img"),g=c&&c.match(/^((?:https?:)?\/\/[^\/]+)\/\w+/i),e=g&&g[1];g=la||b.hasAttribute("data-lazy")||"IFRAME"===b.nodeName;if("IFRAME"===b.nodeName)a&&a.media?Q(b,a.media):E(b),a&&a.directIframeSrc&&b.setAttribute("data-direct",""),g?(f&&(fa(b,c),c=
t(c,"img\x3d1")),b.setAttribute("data-iframely-url",a&&a.directIframeSrc||c),q.push({iframe:b})):(b.setAttribute("src",a&&a.directIframeSrc||c),b.removeAttribute("data-iframely-url"),b.removeAttribute("data-iframely-loading")),A.push({iframe:b});else{var h=b.getAttribute("href"),n=C(b,!0);if(n){var p=n.maxWidthWrapper.parentNode;E(b,n)}else p=b.parentNode,ia();var m=b.getAttribute("data-max-width");if(a&&a.directIframeSrc)var k=a.directIframeSrc;else!h||c&&e?c&&(k=t(c,"app\x3d1"),"auto"===m&&(c=p.clientWidth)&&
(k=t(k,"maxwidth\x3d"+c)),W&&(k=t(k,"align\x3d"+W))):(m=m||X,k="/api/iframe?app\x3d1\x26url\x3d"+encodeURIComponent(h),k=V?L+k+"\x26key\x3d"+V:U?L+k+"\x26api_key\x3d"+U:"http://open.iframe.ly"+k,oa&&(k+="\x26"+oa));if(c=k&&k.match(/^(https?:)?\/\//i)){c[1]||"file:"!==document.location.protocol||(k="http:"+k);e=document.createElement("iframe");e.setAttribute("allowfullscreen","");e.setAttribute("allow","autoplay; encrypted-media");if(n){for(c=n.maxWidthWrapper;n.aspectWrapper.lastChild;)n.aspectWrapper.removeChild(n.aspectWrapper.lastChild);
n.aspectWrapper.appendChild(e)}else c=document.createElement("div"),c.className=w,h=document.createElement("div"),h.className=y,c.appendChild(h),h.appendChild(e);m&&parseInt(m)&&(c.setAttribute("style","max-width: "+m+"px;"),e.setAttribute("data-max-width",m));A.push({iframe:e,iframeContainer:c,originalElement:b});n||(p.insertBefore(c,b),p.removeChild(b));a&&a.media&&Q(e,a.media);g?(f&&(fa(e,k),k=t(k,"img\x3d1")),e.setAttribute("data-iframely-url",k),e.setAttribute("data-iframely-loading",!0),q.push({iframe:e})):
e.setAttribute("src",k)}}d.checkLazyLoad()}});var y="iframely-responsive",w="iframely-embed",ta="iframely-loader";d.importedWidgetRendered||(d.importedWidgetRendered=N);if(!z.on){var Y={};z.on=function(b,a){(Y[b]=Y[b]||[]).push(a)};z.trigger=function(b){var a=Array.prototype.slice.call(arguments,1),c=Y[b]||[];c.forEach(function(b){b.apply(c,a)})}}p.addEventListener||(p.addEventListener=function(b,a,c){b&&(b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent?b.attachEvent("on"+a,c):b["on"+a]=
c)});d.ready||(d.ready=function(b){"function"===typeof b&&b()});p.windowMessaging=function(){return{postMessage:function(b,a,c){b=JSON.stringify(b);c=c||window.parent;window.postMessage&&c.postMessage(b,(a||"*").replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},receiveMessage:function(b){function a(a){try{var c=JSON.parse(a.data)}catch(g){}b(a,c)}if(window.postMessage)if(window.addEventListener)window[b?"addEventListener":"removeEventListener"]("message",a,!1);else window[b?"attachEvent":"detachEvent"]("onmessage",
a)}}}();for(var pa=document.querySelectorAll("script"),Z=0;Z<pa.length&&!L;Z++){var m=pa[Z].getAttribute("src");if(m&&m.match(/\/embed\.js/)){m=m.replace(/&amp;/gi,"\x26");var h=P(m);var U=h.api_key;var V=h.key;var X=h.maxwidth;var da=h.parent;var la=h.lazy;var ka="1"===h.playerjs||"true"===h.playerjs;var W=h.align;var ma=h.iframe;var za="0"===h["import"]||"false"===h["import"];var I=h.media;var na=h.language;delete h.api_key;delete h.key;var qa=[],aa;for(aa in h)qa.push(aa+"\x3d"+encodeURIComponent(h[aa]));
var oa=qa.join("\x26");var L=(m=m.match(T)||document.location.href.match(T))&&m[0]||"https://iframe.ly"}}d.checkLazyLoad||(d._checkLazyLoad=function(){d.checkLazyLoadTimeout&&clearTimeout(d.checkLazyLoadTimeout);d.checkLazyLoadTimeout=null;for(var b=0;b<q.length;){var a=q[b].iframe,c=O(a);c?(q.splice(b,1),ua(a,c)):b++}for(b=0;b<J.length;)a=J[b],(c=O(a.container))?(J.splice(b,1),c=a,a=c.container.parentNode,a.insertBefore(c.widget,c.container),a.removeChild(c.container),c.widgetAfterRenderCb&&c.widgetAfterRenderCb()):
b++},d.checkLazyLoad=function(){d.checkLazyLoadTimeout||(d.checkLazyLoadTimeout=setTimeout(d._checkLazyLoad,300))},window.addEventListener?(addEventListener("scroll",d.checkLazyLoad,!0),addEventListener("resize",d.checkLazyLoad,!0)):window.attachEvent&&(attachEvent("onscroll",d.checkLazyLoad),attachEvent("onresize",d.checkLazyLoad)));d.receiveMessageRegistered||(d.receiveMessageRegistered=!0,p.windowMessaging.receiveMessage(function(b,a){if(a&&a.method){for(var c=null,d=null,g=0;g<A.length&&!c;g++){var e=
A[g];e.iframe.contentWindow===b.source&&(c=e.iframe,d=e)}if(!c)for(g=0;g<R.length&&!c;g++)e=R[g],e.contentWindow===b.source&&(c=e);if(!c){var h=document.querySelectorAll("iframe");for(g=0;g<h.length&&!c;g++)e=h[g],e.contentWindow===b.source&&(R.push(e),c=e)}if(c&&"widgetRendered"===a.method){for(g=0;g<q.length;)e=q[g].iframe,c===e?q.splice(g,1):g++;ha(c)}!c||"setIframelyWidgetSize"!==a.method&&"resize"!==a.method&&"setIframelyEmbedData"!==a.method||Q(c,a.data&&a.data.media||{height:a.height});c&&
"cancelWidget"===a.method&&ca(c,d)}}));var ra=1,ea=2,ja="iframely-styles",wa=".iframely-responsive{top: 0;left: 0;width: 100%;height: 0;position: relative;padding-bottom: 56.25%;}.iframely-responsive\x3e*{top: 0;left: 0;width: 100%;height: 100%;position: absolute;border: 0;box-sizing: border-box;}";p.isTouch=function(){return"ontouchstart"in window||navigator.maxTouchPoints};(function(b){"complete"!==document.readyState&&"interactive"!==document.readyState||b();document.addEventListener?document.addEventListener("DOMContentLoaded",
b):window.attachEvent("onload",b)})(function(){if(!d.existingIframesSizeRequested){d.existingIframesSizeRequested=!0;for(var b=document.querySelectorAll("iframe"),a=0;a<b.length;a++){var c=b[a],f=c.src;(f.match(/^(https?:)?\/\/[^\/]+\/api\/iframe\?.+/)||f.match(/^(https?:)?\/\/[^\/]+\/\w+(\?.*)?$/))&&p.windowMessaging.postMessage({method:"getSize"},"*",c.contentWindow)}}d.load()});(d._e||[]).forEach(function(b){"function"===typeof b&&b()})})();